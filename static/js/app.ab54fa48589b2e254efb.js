webpackJsonp([1],{"9M+g":function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=r("VU/8")({name:"App"},s,!1,function(e){r("Pe99")},null,null).exports,i=r("/ocq"),n={data:function(){return{is_logged:!1,msg:"Home page!"}},beforeMount:function(){this.user=JSON.parse(localStorage.getItem("user")),null!=localStorage.getItem("jwt")&&(this.is_logged=!0)}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"homepage"},[r("h1",[e._v("This is home page")]),e._v(" "),r("h2",[e._v(e._s(e.msg))]),e._v(" "),e.is_logged?r("router-link",{attrs:{to:"/profile"}},[e._v("Go to Profile")]):r("router-link",{attrs:{to:"/login"}},[e._v("Go to login/register")])],1)},staticRenderFns:[]};var m=r("VU/8")(n,l,!1,function(e){r("hK4G")},"data-v-1b82c307",null).exports,u=r("mvHQ"),d=r.n(u),c={data:function(){return{registerForm:{name:"",email:"",password:"",password_confirmation:""}}},methods:{resetModal:function(){this.registerForm.name="",this.registerForm.email="",this.registerForm.password="",this.registerForm.password_confirmation=""},handleSubmitRegister:function(e){var t=this;if(e.preventDefault(),!(this.registerForm.password===this.registerForm.password_confirmation&&this.registerForm.password.length>0))return this.registerForm.password="",this.registerForm.passwordConfirm="",alert("Passwords do not match");this.$http.post("https://nodens-auth.herokuapp.com/register",{name:this.registerForm.name,email:this.registerForm.email,password:this.registerForm.password}).then(function(e){localStorage.setItem("user",d()(e.data.user)),localStorage.setItem("jwt",e.data.token),null!=localStorage.getItem("jwt")&&(t.$emit("loggedIn"),t.$router.push("/profile"))}).catch(function(e){console.error(e)})}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}]},[e._v("Register")]),e._v(" "),r("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Register"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleSubmitRegister}},[r("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("b-form-group",{attrs:{label:"Name","label-for":"name","invalid-feedback":"Name is required"}},[r("b-form-input",{attrs:{id:"name",type:"text",required:"",autofocus:""},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"Email","label-for":"Email-input","invalid-feedback":"email is required"}},[r("b-form-input",{attrs:{id:"email",type:"email",required:""},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"Password","label-for":"password","invalid-feedback":"password is required"}},[r("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"confirm password","label-for":"password-confirm","invalid-feedback":"password-confirm is required"}},[r("b-form-input",{attrs:{id:"password-confirm",type:"password",required:""},model:{value:e.registerForm.password_confirmation,callback:function(t){e.$set(e.registerForm,"password_confirmation",t)},expression:"registerForm.password_confirmation"}})],1)],1)])],1)},staticRenderFns:[]},g=r("VU/8")(c,p,!1,null,null,null).exports,f={components:{Register:g},data:function(){return{loginForm:{email:"",password:""}}},methods:{handleSubmitLogin:function(e){var t=this;e.preventDefault(),this.loginForm.password.length>0&&this.$http.post("https://nodens-auth.herokuapp.com/login",{email:this.loginForm.email,password:this.loginForm.password}).then(function(e){localStorage.setItem("user",d()(e.data.user)),localStorage.setItem("jwt",e.data.token),null!=localStorage.getItem("jwt")&&(t.$emit("loggedIn"),t.$router.push("profile"))}).catch(function(e){console.error(e.response)})}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h4",[e._v("Login")]),e._v(" "),r("form",{staticClass:"col-4 mx-auto"},[r("label",{attrs:{for:"email"}},[e._v("E-Mail Address")]),e._v(" "),r("div",[r("b-form-input",{attrs:{id:"email",type:"email",required:"",autofocus:""},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),e._v(" "),r("div",[r("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),r("div",[r("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)]),e._v(" "),r("br"),e._v(" "),r("div",[r("b-button",{attrs:{type:"submit"},on:{click:e.handleSubmitLogin}},[e._v("Login")])],1)]),e._v(" "),r("br"),e._v(" "),r("Register")],1)},staticRenderFns:[]},v=r("VU/8")(f,h,!1,null,null,null).exports,b={data:function(){return{user:{}}},beforeMount:function(){this.user=JSON.parse(localStorage.getItem("user"))},methods:{handleLogOut:function(){localStorage.clear(),this.$router.push("/login")}}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"profile"},[t("h1",[this._v("Welcome "+this._s(this.user.name))]),this._v(" "),t("b-button",{on:{click:this.handleLogOut}},[this._v("logout")])],1)},staticRenderFns:[]};var _=r("VU/8")(b,w,!1,function(e){r("roNj")},"data-v-05133eeb",null).exports;o.default.use(i.a);var F=new i.a({mode:"history",routes:[{path:"/",name:"HomePage",component:m},{path:"/login",name:"login",component:v,meta:{guest:!0}},{path:"/register",name:"register",component:g,meta:{guest:!0}},{path:"/profile",name:"profile",component:_,meta:{requiresAuth:!0}}]});F.beforeEach(function(e,t,r){e.matched.some(function(e){return e.meta.requiresAuth})?null==localStorage.getItem("jwt")?r({path:"/login"}):r():e.matched.some(function(e){return e.meta.guest})?null==localStorage.getItem("jwt")?r():r({name:"profile"}):r()});var k=F,S=r("mtWM"),$=r.n(S),q=r("Tqaz");r("Jmt5"),r("9M+g");o.default.prototype.$http=$.a,o.default.config.productionTip=!1,o.default.use(q.a),o.default.use(q.b),new o.default({el:"#app",router:k,components:{App:a},template:"<App/>"})},Pe99:function(e,t){},hK4G:function(e,t){},roNj:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ab54fa48589b2e254efb.js.map